import{importShared as p}from"./__federation_fn_import-D3SzAL4j.js";import{_ as T}from"./preload-helper-B6RDIy57.js";import{j as o}from"./jsx-runtime-NAwZxSSi.js";const k={"biz-console-framework":{url:"http://localhost:4100/assets/biz-console-framework/biz-console-framework.js",format:"esm",from:"vite"}},v=async(t,e)=>{const r=typeof t=="function"?await t():t,n=document.createElement("script");n.type="text/javascript",n.onload=e,n.src=r,document.getElementsByTagName("head")[0].appendChild(n)};function d(t,e){return I(t).then(r=>()=>e==="webpack"&&Object.prototype.toString.call(r).indexOf("Module")>-1&&r.default?r.default:r)}function b(t,e){const r=Object.assign(t,e);for(const n of Object.keys(r))typeof r[n]=="object"&&typeof e[n]=="object"&&(r[n]=b(r[n],e[n]));return r}const g=t=>b({react:{undefined:{get:()=>d(new URL("__federation_shared_react-ClAeYogB.js",import.meta.url).href,t),loaded:1}},"react-dom":{undefined:{get:()=>d(new URL("__federation_shared_react-dom-Dhf6MI3N.js",import.meta.url).href,t),loaded:1}},"@mui/material":{undefined:{get:()=>d(new URL("__federation_shared_@mui/material-DqSoyLs4.js",import.meta.url).href,t),loaded:1}},zustand:{undefined:{get:()=>d(new URL("__federation_shared_zustand-DAkbMvQZ.js",import.meta.url).href,t),loaded:1}}},(globalThis.__federation_shared__||{}).default||{});async function I(t){return T(()=>import(t),[])}async function x(t){const e=k[t];if(e.inited)return e.lib;if(e.format==="var")return new Promise(r=>{const n=()=>{e.inited||(e.lib=window[t],e.lib.init(g(e.from)),e.inited=!0),r(e.lib)};return v(e.url,n)});if(["esm","systemjs"].includes(e.format))return new Promise((r,n)=>{(typeof e.url=="function"?e.url:()=>Promise.resolve(e.url))().then(f=>{T(()=>import(f),[]).then(a=>{if(!e.inited){const c=g(e.from);a.init(c),e.lib=a,e.lib.init(c),e.inited=!0}r(e.lib)}).catch(n)})})}function h(t,e){return x(t).then(r=>r.get(e).then(n=>n()))}const z=await h("biz-console-framework","./biz-console-framework");let{DEFAULT_WIDGET_MAIN_SETTING_TABS:N,CUSTOM_SETTINGS_ON_CLICK_SETTINGS:L,DEFAULT_WIDGET_STYLE_SETTING_TABS:O,CUSTOM_SETTINGS_STYLE_PARAM:P,EntityCustomSettingParamType:W,EntityViewCustomSettingsParamType:A}=z;const D=t=>!!t,U=()=>({location:""}),V={tabs:[{...N,params:[{paramType:A.PARAM,type:W.STRING,key:"location",label:"Location",description:"Select the location you want to show weather data for",required:!0},L]},{...O,params:[P]}]},{Box:w,Paper:G,Typography:M,styled:s}=await p("@mui/material"),B=s(G,{name:""})(({theme:t})=>({padding:t.spacing(2)})),E=s(M,{name:"title"})(({theme:t})=>({textTransform:"capitalize"}));E.defaultProps={variant:"h1"};const q=s(w,{name:"content"})(({theme:t})=>({marginTop:t.spacing(2)})),F=s(w,{name:"row"})(({theme:t})=>({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"})),y=s(w,{name:"row"})(({theme:t})=>({padding:t.spacing(1),"&.name":{textTransform:"capitalize"}})),H=await h("biz-console-framework","./biz-console-framework");let{EntityViewCompCollection:J,IconSource:K}=H;const C=await p("react"),{useCallback:X,useEffect:Y,useImperativeHandle:$,useMemo:S,useState:Q}=C,{CircularProgress:Z}=await p("@mui/material"),ee=await h("biz-console-framework","./services");let{ExternalAPI:te,RequestMethod:re}=ee;const _=C.forwardRef(({className:t,style:e,sx:r,id:n,compSettings:u},f)=>{const a=S(()=>u.customSettings??U(),[u.customSettings]),c=S(()=>({...r,...a.style}),[a.style,r]),[i,j]=Q(),l=X(async()=>{const m=await te.getInstance().sendRequest(re.GET,`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${a.location}?unitGroup=metric&key=WRQ4RXK5JTTL866UHBFNB8XB6&contentType=json`);console.log(m.data),j(m.data)},[a.location]);return $(f,()=>({getId:()=>n,getDataRequests:()=>{l()},onDataReady:()=>{}}),[n,l]),Y(()=>{i||l()},[l,i]),i?o.jsxs(B,{id:n,className:t,style:e,sx:c,children:[o.jsxs(E,{children:["Weather data for: ",i.address]}),o.jsx(q,{children:Object.entries(i.currentConditions).map(([m,R])=>o.jsxs(F,{children:[o.jsx(y,{className:"name",children:m}),o.jsx(y,{className:"value",children:R})]}))})]}):o.jsx(Z,{})});_.displayName="WeatherEntityViewComp";J.getInstance().registerComponent({type:_.displayName,componentFunc:_,icon:{source:K.BIZ_CONSOLE,name:"FireOutlined"},displayName:"Weather Widget",description:"Widget that display the weather",customSettingsValidator:D,customSettingsSchema:V});export{_ as WeatherEntityViewComp};

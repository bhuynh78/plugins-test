import{importShared as a}from"./__federation_fn_import-C3MGflHL.js";import{j as e}from"./jsx-runtime-C55WN_BT.js";const{useCallback:P,useState:O}=await a("react"),{APIError:b,MazeAPI:S,isValidObjectValue:F,useAuthenticationStore:I,StyledForm:c,StyledPanel:m}=await a("@moderepo/biz-console"),L=(t,o)=>!!F(t,!0,o),y=({sx:t})=>{const o=I(r=>r.actions),s=I(r=>r.loggedInUser),[i,u]=O(s.name),d=P(r=>{u(r.target.value)},[]),x=P(async()=>{const r=await S.getInstance().updateUser(s.id,{name:i});if(r instanceof b)alert(`Save user failed with error "${r.errorCode}"`);else{const n=await S.getInstance().getUser(s.id);n instanceof b||await o.setLoggedInUser(n)}},[o,s.id,i]),C=P(async r=>{r.preventDefault()},[]);return e.jsx(m.Panel,{sx:t,children:e.jsx(c.FormContainer,{children:e.jsxs(c.Form,{onSubmit:C,children:[e.jsx(m.HeaderBar,{children:e.jsx(m.HeaderBarLeftContent,{children:e.jsx(m.HeaderBarTitle,{children:"My Account Info"})})}),e.jsxs(m.Content,{children:[e.jsx(c.TextInputField,{label:"ID",InputProps:{readOnly:!0},value:s.id}),e.jsx(c.TextInputField,{label:"Email",InputProps:{readOnly:!0},value:s.email}),e.jsx(c.TextInputField,{label:"Name",variant:"outlined",value:i??"",onChange:d})]}),e.jsx(m.FooterBar,{children:e.jsx(c.ActionsBar,{children:e.jsx(c.RightActionsBar,{children:e.jsx(c.ActionButton,{variant:"contained",disabled:s.name===i,onClick:x,children:"Save"})})})})]})})})};y.displayName="MyAccountInfoComponent";const{Box:w,Paper:V,styled:B}=await a("@mui/material"),U=B(w,{name:"MyAccountComponents",slot:"myCustomAccountPage"})(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"}));B(V,{name:"MyAccountComponents",slot:"root"})(({theme:t})=>({padding:t.spacing(2)}));const{useCallback:j}=await a("react"),{BIZCONSOLE_THEME_TRANSLATION_KEY:E,BizConsoleTheme:$,SUPPORTED_LANGUAGES:z,isValidObjectValue:k,useAuthenticationStore:H,useUserPreferencesStore:N,StyledPanel:p,StyledForm:l}=await a("@moderepo/biz-console"),{MenuItem:T,OutlinedInput:M}=await a("@mui/material"),{useTranslation:D}=await a("react-i18next"),R=(t,o)=>!!k(t,!0,o),h=({projectId:t,sx:o})=>{const{t:s}=D(),i=H(n=>n.loggedInUser),u=N(n=>n.actions),d=N(n=>n.userPreferencesByProjectIdByUserId[t]?.[i.id]),x=j(n=>{u.setUserPreferencesLanguage(t,i.id,n.target.value)},[i.id,t,u]),C=j(n=>{u.setUserPreferencesTheme(t,i.id,n.target.value)},[i.id,t,u]),r=j(async n=>{n.preventDefault()},[]);return e.jsx(p.Panel,{sx:o,children:e.jsx(l.FormContainer,{children:e.jsxs(l.Form,{onSubmit:r,children:[e.jsx(p.HeaderBar,{children:e.jsx(p.HeaderBarLeftContent,{children:e.jsx(p.HeaderBarTitle,{children:" My Preferences"})})}),e.jsxs(p.Content,{children:[e.jsxs(l.StyledFormControl,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(l.StyledInputLabel,{children:"Language"}),e.jsx(l.SelectInputField,{label:"Language",input:e.jsx(M,{notched:!0,label:"Language"}),type:"number",value:d?.language??"",onChange:x,children:z.map(n=>e.jsx(T,{value:n.code,selected:n.code===d?.language,children:n.name},n.code))})]}),e.jsxs(l.StyledFormControl,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(l.StyledInputLabel,{children:"Theme"}),e.jsx(l.SelectInputField,{label:"Theme",input:e.jsx(M,{notched:!0,label:"Theme"}),type:"number",value:d?.theme??"",onChange:C,children:Object.values($).map(n=>e.jsx(T,{value:n,selected:n===d?.theme,children:s(E[n])},n))})]})]})]})})})};h.displayName="MyAccountPrefComponent";const{isValidObjectValue:_}=await a("@moderepo/biz-console"),{Box:q,Typography:v}=await a("@mui/material"),G=(t,o)=>!!_(t,!0,o),f=({projectId:t})=>e.jsxs(U,{children:[e.jsxs(q,{sx:{textAlign:"center",paddingBottom:5},children:[e.jsx(v,{variant:"h2",children:"This is a Custom Page"}),e.jsx(v,{variant:"h5",children:"Anything can go in here"})]}),e.jsx(y,{projectId:t}),e.jsx(h,{sx:{marginTop:2},projectId:t})]});f.displayName="MyCustomAccountPage";const{useCallback:W}=await a("react"),{Button:K}=await a("@mui/material"),{Icons:Y,isValidObjectValue:Z}=await a("@moderepo/biz-console"),{useNavigate:J}=await a("react-router-dom"),Q=(t,o)=>!!Z(t,!0,o),A=({projectId:t})=>{const o=J(),s=W(()=>{o(`/projects/${t}/logout`,{replace:!0})},[o,t]);return e.jsx(K,{variant:"contained",startIcon:e.jsx(Y.LogoutOutlined,{}),onClick:s,children:"Logout"})};A.displayName="LogoutButton";const{BizConsolePluginType:g}=await a("@moderepo/biz-console"),te={bizConsoleVersion:"0.0.2",plugins:[{type:g.COMPONENT,name:"My Custom Account Page",componentTypeSettings:{type:f.displayName,componentFunc:f,displayName:"My Custom Account Page",description:"A custom page that display my account info",customPropsValidator:G}},{type:g.COMPONENT,name:"My Account Info Component",componentTypeSettings:{type:y.displayName,componentFunc:y,displayName:"My Account Info Component",description:"A custom component that display my account info",customPropsValidator:L}},{type:g.COMPONENT,name:"My Account Pref Component",componentTypeSettings:{type:h.displayName,componentFunc:h,displayName:"My Account Preferences Component",description:"A custom component that display my account preferences",customPropsValidator:R}},{type:g.COMPONENT,name:"Logout Button",componentTypeSettings:{type:A.displayName,componentFunc:A,displayName:"Logout Button",description:"A button to log the user out",customPropsValidator:Q}}]};export{y as MyAccountInfoComponent,h as MyAccountPrefComponent,f as MyCustomAccountPage,te as bizConsolePlugins,L as isMyAccountInfoComponentProps,R as isMyAccountPrefComponentProps,G as isMyCustomAccountPageProps};
